<!DOCTYPE html>
<html lang="en">

<head>
  <meta name="description" content="JavaScript/TypeScript implementation of the Impossible Bridge Book" />
  <meta charset="utf-8">
  <title>The Impossible Bridge Book: JavaScript edition</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="author" content="Thomas Andrews">
  <!-- <link rel="stylesheet" href="css/style.css"> -->
  <script src="http://code.jquery.com/jquery-latest.min.js"></script>
</head>

<body>
  
<div class="container">
 <form name="lookup" id='lookup' onsubmit='return false;'>
Page Number(s): <input type='text' id='pageNo' name='pageNumbers' maxlength='1000'  size='70'></input>
<input type="submit" value="Lookup"></input> 

</form>
<pre id='toWhom'>
</pre>
</div>

    <script type="module">

      import { AndrewsStrategy, scramble_book} from "./numeric/book.js"
      var aBook = new AndrewsStrategy()
      var sBook = scramble_book(aBook,BigInt("13109994191499930367061460371"),BigInt("34563463456363563565356345634"))

      console.log(aBook.computePageContent(BigInt(0)).toWhom)
      console.log(aBook.computePageContent(aBook.signature.lastPage()).toWhom)
      function initialize() {
          const form = $('#lookup')
          form.submit(() => {
              submit_pages(form)
              return false;
          }) 
      }

      function submit_pages(form) {
          var page = form.find('input[name="pageNumbers"]').val()
          var pageNo = BigInt(page)
          var deal = sBook.computePageContent(pageNo)
          var text = deal.toWhom.toString()+'\n'
          deal.hands.forEach((hand,seat) => {
              text += 'Seat ' + seat +': ' + hand.toString() + '\n'
          })
          $('#toWhom').text(text)
      }

      initialize()
   </script>

</body>
</html>


